# Блок "Модель акторов, процессы"

Данный модуль содержит базовые сведения о модели акторов, ссылки на материалы,
необходимые для ознакомления, вопросы и упражнения.

## Стандартная документация

### Материалы для изучения

### Вопросы

### Упражнения

### 3.1. База данных
За основу возьмите модуль db из предыдущего задания, оформите это в виде
процесса. API примерно такой же, с небольшими изменениями:

```erlang
db:new() => Pid.  %% Возвращает pid созданного процесса.
```

```erlang
db:destroy(Db) => ok.
```
Убивает созданный процесс с помощью функции exit(Pid, Reason),
`Pid` - идентификатор процесса,
`Reason` - терм, обозначающий причину прерывания.
В качестве Reason можно указать атом exit.

```erlang
db:write(Key, Element, Db) => ok | {error, Reason}. 
```

В качестве ошибочной ситуации можно привести пример, когда процесс базы данных
уже убит, а мы пытаемся все еще что-то с ним делать. Для проверки, жив ли
процесс или уже нет, можно использовать функцию `is_process_alive(Pid)`.

```erlang
db:delete(Key, Db) => ok | {error, Reason}.
db:read(Key, Db) => {ok, Element} | {error, instance}.
db:match(Element, Db) => [Keyl, ..., KeyN].
```

Каждый процесс может иметь состояние, вспоминайте хвостовую рекурсию.
Воспользуйтесь идеей, приведенной ниже:

```erlang
proc(State) ->
    NewState = receive
        Msg ->
            %% ...какие то вычисления с термами Msg и State, возвращающие новое состояние NewState...
    end,
    proc(NewState).
```

### 3.2. Братство Кольца
Создайте кольцо процессов и запустите по нему некоторое сообщение. Сообщение
(условно назовем его "маркер") должно пробежаться по кольцу M раз, после чего
необходимо остановиться.

### 3.3. Вспоминая Дейкстру
Организуйте граф, каждый узел которого представлен процессом, а ребра графа
означают, что между двумя узлами, соединенными ребром, возможна переылка
сообщений в обе стороны. Создайте модуль, интерфейс которого предназначен для
работы с такими графами: создание графов, добавление и удаление узлов и связей.
Также интерфейс этого модуля должен предоставлять метод для реализации обхода
графа в ширину.

### 3.4. Три закона робототехники\*
 - Создайте процесс, имитирующий поведение робота. Робот должен выполнять
   команду перемещения `step`, поворота `{rotate, Direction}`, где `Direction`
   принимает два значения: `right` и ` left`.
 - Запустите несколько роботов и заставьте их перемещаться по некоторому полю.
   Необходимо обрабатывать ситуации столкновения. Продумайте методы
   синхронизации процессов.
 - На выполнение каждой команды `step` робот затрачивает определенное количество
   энергии. Когда энергии становится ниже определенного порога, робот начинает
   искать станцию зарядки. На расстоянии одной клетки от станции робот
   заряжается. Зарядившись, он может дальше предаваться праздному шатанию по
   полю. Поместите станцию зарядки в какую нибудь клетку
   виртуального поля. Научите роботов заботиться о своем энергетическом балансе.

Результаты перемещения роботов в виртуальном мире фиксируйте в текстовом файле.
Это поможет вам в будущем визуализировать все перемещения роботов по полю.

### 3.4. Мэр планеты Шелезяка
Роботы живут на планете Шелезяка. Но вот проблема: планете нужен мэр.  Поскольку
все роботы обладают равными умениями (потенциально), то и договориться им
непросто. Организуйте между ними выборную гонку, в ходе которой они смогут
договориться, кто из них станет мэром.

Раньше роботы поступали так: на Шелезяку временно приглашается робот-судья,
который просит всех роботов загадать случайное число, и дальше судья по этим
числам определяет, кто становится мером. Если же несколько роботов загадали одно
и то же число, оказавшееся максимальным, судья просит проигравших роботов
удалиться из зала заседаний и организовывает следующий раунд для оставшихся
роботов. Эта процедура повторяется до тех пор, пока не останется один
победитель. После чего робот-судья объявляет мэра и улетает.

Но сейчас роботы усомнились в беспристрастности робота-судьи и решили все таки
научиться договариваться без него, то есть устроить самые объективные выборы. Но
как в таком случае они должны обходитсья без судьи?

К сожалению, не все вечно, и даже стойкие роботы могут ломаться, в том числе и
мэр планеты Шелезяка. Как обнаружить, что мозги мэра заржавели и пора его
отправлять на свалку, а после этого выбрать нового мэра?
